#!/bin/bash

DEBOOT="$1"
ARCH="$2"
STAGE="$3"

FILES_LIST="
r   /sbin/shadowconfig
r   /usr/bin/chage
r   /usr/bin/chfn
r   /usr/bin/chsh
r   /usr/bin/expiry
r   /usr/bin/gpasswd
r   /usr/sbin/groupadd
r   /usr/sbin/groupdel
r   /usr/sbin/groupmod
r   /usr/sbin/useradd
r   /usr/sbin/userdel
r   /usr/sbin/usermod
"
# TODO
# - /etc/pam.d
# - /etc/cron.daily
# - /etc/default

# /usr/share/doc, /usr/share/info, /usr/share/man and /usr/share/lintian
# are all dealt with centrally


if [ "$STAGE" = "minimise" ]; then
    # remove files
    echo "$FILES_LIST" | while read action file; do
        case "$action" in
        r)  eval rm -f "${DEBOOT}/$file"
            ;;
        esac
    done
else
    # unsupported stage
    exit 1
fi

